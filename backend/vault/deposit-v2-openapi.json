{"openapi": "3.1.0", "info": {"title": "NinjaAPI", "version": "1.0.0", "description": ""}, "paths": {"/api/deposits/v2/register": {"post": {"operationId": "vault_deposit_api_register_deposit", "summary": "Register Deposit", "parameters": [], "responses": {"200": {"description": "OK", "content": {"application/json": {"schema": {"$ref": "#/components/schemas/RegisterDeposit2Response"}}}}, "404": {"description": "Not Found"}, "409": {"description": "Conflict", "content": {"application/json": {"schema": {"$ref": "#/components/schemas/ErrorResponse"}}}}}, "description": "Registers a new `Deposit`.", "requestBody": {"content": {"application/json": {"schema": {"$ref": "#/components/schemas/RegisterDeposit2Request"}}}, "required": true}}}, "/api/deposits/v2/chunk": {"get": {"operationId": "vault_deposit_api_has_chunk", "summary": "Has Chunk", "parameters": [{"in": "query", "name": "depositId", "schema": {"description": "ID of target `Deposit`", "title": "Depositid", "type": "integer"}, "required": true, "description": "ID of target `Deposit`"}, {"in": "query", "name": "flowIdentifier", "schema": {"description": "Unique identifier of file. Must be a pure function of the file underlying the chunk and globally unique.", "title": "Flowidentifier", "type": "string"}, "required": true, "description": "Unique identifier of file. Must be a pure function of the file underlying the chunk and globally unique."}, {"in": "query", "name": "flowFilename", "schema": {"description": "Name of file being uploaded as appearing on user filesystem", "title": "Flowfilename", "type": "string"}, "required": true, "description": "Name of file being uploaded as appearing on user filesystem"}, {"in": "query", "name": "flowRelativePath", "schema": {"description": "Relative path of file as appearing on user filesystem", "title": "Flowrelativepath", "type": "string"}, "required": true, "description": "Relative path of file as appearing on user filesystem"}, {"in": "query", "name": "flowChunkNumber", "schema": {"description": "1-based index of the current chunk in the sequence of chunks.", "minimum": 1, "title": "Flowchunknumber", "type": "integer"}, "required": true, "description": "1-based index of the current chunk in the sequence of chunks."}, {"in": "query", "name": "flowChunkSize", "schema": {"description": "Maximum chunk size in bytes for this file", "minimum": 1, "title": "Flowchunksize", "type": "integer"}, "required": true, "description": "Maximum chunk size in bytes for this file"}, {"in": "query", "name": "flowCurrentChunkSize", "schema": {"description": "size in bytes of the current chunk", "minimum": 0, "title": "Flowcurrentchunksize", "type": "integer"}, "required": true, "description": "size in bytes of the current chunk"}, {"in": "query", "name": "flowTotalSize", "schema": {"description": "size in bytes of file being uploaded", "minimum": 0, "title": "Flowtotalsize", "type": "integer"}, "required": true, "description": "size in bytes of file being uploaded"}, {"in": "query", "name": "flowTotalChunks", "schema": {"description": "number of chunks comprising the file", "minimum": 1, "title": "Flowtotalchunks", "type": "integer"}, "required": true, "description": "number of chunks comprising the file"}, {"in": "query", "name": "flowMimetype", "schema": {"description": "user-reported mimetype of file being uploaded", "title": "Flowmimetype", "type": "string"}, "required": true, "description": "user-reported mimetype of file being uploaded"}, {"in": "query", "name": "flowUserMtime", "schema": {"description": "ISO8601-formatted modification time of file on user filesystem", "format": "date-time", "title": "Flowusermtime", "type": "string"}, "required": true, "description": "ISO8601-formatted modification time of file on user filesystem"}, {"in": "query", "name": "md5", "schema": {"anyOf": [{"type": "string"}, {"type": "null"}], "description": "md5sum of chunk bytes computed by uploading user agent", "title": "Chunk md5 hash hex digest"}, "required": false, "description": "md5sum of chunk bytes computed by uploading user agent"}], "responses": {"204": {"description": "No Content"}, "200": {"description": "OK"}, "404": {"description": "Not Found"}}, "description": "Determines whether Vault has posession of the described chunk\n\nReturn statuses:\n* ``200`` - Vault in posession of described chunk\n* ``204`` - Vault *not* in posession of described chunk; please send chunk\n* ``404`` - indicates `Deposit` does not exist or has already been\n  finalized and will accept no further chunks"}, "post": {"operationId": "vault_deposit_api_send_chunk", "summary": "Send Chunk", "parameters": [], "responses": {"204": {"description": "No Content"}, "200": {"description": "OK"}, "404": {"description": "Not Found"}, "422": {"description": "Unprocessable Entity"}}, "description": "Send a chunk of data comprising a file of a `Deposit` to Vault.\n\nReturn statuses:\n* ``200`` - On success\n* ``404`` - indicates `Deposit` does not exist or has already been\n* ``422`` - when the checksum of the chunk conflicts the provided md5", "requestBody": {"content": {"multipart/form-data": {"schema": {"title": "MultiPartBodyParams", "type": "object", "properties": {"depositId": {"description": "ID of target `Deposit`", "title": "Depositid", "type": "integer"}, "flowIdentifier": {"description": "Unique identifier of file. Must be a pure function of the file underlying the chunk and globally unique.", "title": "Flowidentifier", "type": "string"}, "flowFilename": {"description": "Name of file being uploaded as appearing on user filesystem", "title": "Flowfilename", "type": "string"}, "flowRelativePath": {"description": "Relative path of file as appearing on user filesystem", "title": "Flowrelativepath", "type": "string"}, "flowChunkNumber": {"description": "1-based index of the current chunk in the sequence of chunks.", "minimum": 1, "title": "Flowchunknumber", "type": "integer"}, "flowChunkSize": {"description": "Maximum chunk size in bytes for this file", "minimum": 1, "title": "Flowchunksize", "type": "integer"}, "flowCurrentChunkSize": {"description": "size in bytes of the current chunk", "minimum": 0, "title": "Flowcurrentchunksize", "type": "integer"}, "flowTotalSize": {"description": "size in bytes of file being uploaded", "minimum": 0, "title": "Flowtotalsize", "type": "integer"}, "flowTotalChunks": {"description": "number of chunks comprising the file", "minimum": 1, "title": "Flowtotalchunks", "type": "integer"}, "flowMimetype": {"description": "user-reported mimetype of file being uploaded", "title": "Flowmimetype", "type": "string"}, "flowUserMtime": {"description": "ISO8601-formatted modification time of file on user filesystem", "format": "date-time", "title": "Flowusermtime", "type": "string"}, "md5": {"anyOf": [{"type": "string"}, {"type": "null"}], "description": "md5sum of chunk bytes computed by uploading user agent", "title": "Chunk md5 hash hex digest"}, "file": {"description": "Content of chunk", "format": "binary", "title": "File", "type": "string"}}, "required": ["depositId", "flowIdentifier", "flowFilename", "flowRelativePath", "flowChunkNumber", "flowChunkSize", "flowCurrentChunkSize", "flowTotalSize", "flowTotalChunks", "flowMimetype", "flowUserMtime", "file"]}}}, "required": true}}}, "/api/deposits/v2/finalize": {"post": {"operationId": "vault_deposit_api_finalize_deposit", "summary": "Finalize Deposit", "parameters": [], "responses": {"200": {"description": "OK"}, "400": {"description": "Bad Request"}, "404": {"description": "Not Found"}}, "description": "Signals that a previously-registered `Deposit` is complete.\n\nFinalizing a `Deposit` carries the implication that  all chunks for all\nfiles the client intends to upload have been sent. Sending any further\nchunks after this handler is called is an error.\n\nIdempotent.\n\nReturn statuses:\n* ``200`` - `Deposit` successfully finalized\n* ``400`` - attempt to finalize `Deposit` comprised of files for which not\n  all chunks have yet been received by Vault\n* ``404`` - indicated `Deposit` does not exist", "requestBody": {"content": {"application/json": {"schema": {"$ref": "#/components/schemas/FinalizeDepositRequest"}}}, "required": true}}}, "/api/deposits/v2/terminate": {"post": {"operationId": "vault_deposit_api_terminate_deposit", "summary": "Terminate Deposit", "parameters": [], "responses": {"200": {"description": "OK"}, "400": {"description": "Bad Request"}, "404": {"description": "Not Found"}}, "requestBody": {"content": {"application/json": {"schema": {"$ref": "#/components/schemas/TerminateDepositRequest"}}}, "required": true}}}}, "components": {"schemas": {"RegisterDeposit2Response": {"description": "Description of the newly registered Deposit", "properties": {"deposit_id": {"title": "Deposit Id", "type": "integer"}}, "required": ["deposit_id"], "title": "RegisterDeposit2Response", "type": "object"}, "ErrorCode": {"enum": ["INVALID_AFTER_TOKEN", "QUOTA_EXHAUSTED"], "title": "ErrorCode", "type": "string"}, "ErrorResponse": {"description": "A response describing an error that occurred.", "properties": {"code": {"allOf": [{"$ref": "#/components/schemas/ErrorCode"}], "description": "code identifying the type of the error", "title": "Error Code"}, "message": {"anyOf": [{"type": "string"}, {"type": "null"}], "description": "human-readable description of the details of the error; not necessarily suitable for displaying to customers", "title": "Message"}}, "required": ["code", "message"], "title": "ErrorResponse", "type": "object"}, "RegisterDeposit2Request": {"description": "Description of Deposit to register.\n\nOne and only one of `parent_node_id` and `collection_id` must be supplied.", "properties": {"parent_node_id": {"anyOf": [{"type": "integer"}, {"type": "null"}], "description": "id of TreeNode to root the new Deposit. TreeNode must be owned by requesting User's Organization. TreeNode must be of type COLLECTION or FOLDER", "title": "Parent TreeNode ID"}, "collection_id": {"anyOf": [{"type": "integer"}, {"type": "null"}], "description": "id of Collection serving as the root of the new Deposit. Must be owned by the requesting User's Organization", "title": "Parent Collection ID"}}, "title": "RegisterDeposit2Request", "type": "object"}, "ChunkRequest": {"properties": {"depositId": {"description": "ID of target `Deposit`", "title": "Depositid", "type": "integer"}, "flowIdentifier": {"description": "Unique identifier of file. Must be a pure function of the file underlying the chunk and globally unique.", "title": "Flowidentifier", "type": "string"}, "flowFilename": {"description": "Name of file being uploaded as appearing on user filesystem", "title": "Flowfilename", "type": "string"}, "flowRelativePath": {"description": "Relative path of file as appearing on user filesystem", "title": "Flowrelativepath", "type": "string"}, "flowChunkNumber": {"description": "1-based index of the current chunk in the sequence of chunks.", "minimum": 1, "title": "Flowchunknumber", "type": "integer"}, "flowChunkSize": {"description": "Maximum chunk size in bytes for this file", "minimum": 1, "title": "Flowchunksize", "type": "integer"}, "flowCurrentChunkSize": {"description": "size in bytes of the current chunk", "minimum": 0, "title": "Flowcurrentchunksize", "type": "integer"}, "flowTotalSize": {"description": "size in bytes of file being uploaded", "minimum": 0, "title": "Flowtotalsize", "type": "integer"}, "flowTotalChunks": {"description": "number of chunks comprising the file", "minimum": 1, "title": "Flowtotalchunks", "type": "integer"}, "flowMimetype": {"description": "user-reported mimetype of file being uploaded", "title": "Flowmimetype", "type": "string"}, "flowUserMtime": {"description": "ISO8601-formatted modification time of file on user filesystem", "format": "date-time", "title": "Flowusermtime", "type": "string"}, "md5": {"anyOf": [{"type": "string"}, {"type": "null"}], "description": "md5sum of chunk bytes computed by uploading user agent", "title": "Chunk md5 hash hex digest"}}, "required": ["depositId", "flowIdentifier", "flowFilename", "flowRelativePath", "flowChunkNumber", "flowChunkSize", "flowCurrentChunkSize", "flowTotalSize", "flowTotalChunks", "flowMimetype", "flowUserMtime"], "title": "ChunkRequest", "type": "object"}, "FinalizeDepositRequest": {"properties": {"depositId": {"description": "ID of target `Deposit`", "title": "Depositid", "type": "integer"}}, "required": ["depositId"], "title": "FinalizeDepositRequest", "type": "object"}, "TerminateDepositRequest": {"properties": {"depositId": {"description": "ID of target `Deposit`", "title": "Depositid", "type": "integer"}}, "required": ["depositId"], "title": "TerminateDepositRequest", "type": "object"}}}, "servers": []}