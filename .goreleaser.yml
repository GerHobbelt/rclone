# Make sure to check the documentation at https://goreleaser.com
#
# To tag the current vault branch for upload, use something like:
#
# $ git tag v1.57.0-vault-$(date +"%Y%m%d%H%M%S")-$(git rev-parse --short HEAD)
#
# Where v1.57.0 is the latest tag of the master branch that this branch is rebased off.
before:
  hooks:
    # You may remove this if you don't use go modules.
    - go mod tidy
builds:
  - env:
      - CGO_ENABLED=0
    goos:
      - linux
      - windows
      - darwin
    goarch:
      - amd64
      - arm64
archives:
  - format: binary
  - replacements:
      darwin: Darwin
      linux: Linux
      windows: Windows
      # 386: i386
      amd64: x86_64
# checksum:
  # name_template: 'checksums.txt'
snapshot:
  name_template: "{{ incpatch .Version }}-vault"
changelog:
  skip: true
  # sort: asc
  # filters:
  #   exclude:
  #     - '^docs:'
  #     - '^test:'
release:
  github:
    owner: internetarchive
    name: rclone
  prerelease: true
  disable: false
  header: |
    ## rclone with vault support (experimental)

    This is an release of rclone with support for the Vault
    Digital Preservation System, developed by the [Internet
    Archive](https://archive.org).

    * Date: {{ .Date }}
    * Version: {{ .Version }}
    * Branch: {{ .Branch }}
    * Tag: {{ .Tag }}
    * Commit: {{ .FullCommit }}
